<div sv-root sv-on-sort="ctrl.onSort($indexFrom, $indexTo)" sv-part="ctrl.items">
  <div ng-repeat="item in ctrl.items" ng-switch="item.type" sv-element class="item-wrapper">
    <div class="toolbar">
      <a ng-click="ctrl.add('command', $index)" class="add-command" title="insert command here"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.5 11H13V7.5c0-.275-.225-.5-.5-.5h-2c-.275 0-.5.225-.5.5V11H6.5c-.275 0-.5.225-.5.5v2c0 .275.225.5.5.5H10v3.5c0 .275.225.5.5.5h2c.275 0 .5-.225.5-.5V14h3.5c.275 0 .5-.225.5-.5v-2c0-.275-.225-.5-.5-.5z"/></svg></a>
      <a ng-click="ctrl.add('comment', $index)" class="add-comment" title="insert comment here"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 7H8c-.55 0-1 .45-1 1v6c0 .55.45 1 1 1h1v3l3.037-3H18c.55 0 1-.45 1-1V8c0-.55-.45-1-1-1z"/></svg></a>
    </div>
    <div ng-switch-when="comment" class="item item--comment">
      <div sv-handle class="handle"></div>
      <div class="comment"><input ng-model="item.value" placeholder="enter a comment" /></div>
      <a ng-click="ctrl.remove($event, item)" class="remove"></a>
    </div>
    <div ng-switch-default class="item item--command" ng-class="{'in-progress': item.state === ctrl.STATES.INPROGRESS, 'done': item.state === ctrl.STATES.DONE, 'failed': item.state === ctrl.STATES.FAILED }">
      <div sv-handle class="handle"></div>
      <div class="command"><input list="commands" ng-model="item.command" ng-dblclick="ctrl.execute($event, item, $index)" placeholder="command" /></div>
      <div class="locator">
        <input ng-model="item.locator" ng-click="ctrl.highlight($event, item)" placeholder="locator" />
        <a class="select-handle halflings" ng-class="{'halflings-record-empty': !item.selecting, 'halflings-record': item.selecting}" ng-click="ctrl.selectElement($event, item)" title="Select an element in the page"></a>
      </div>
      <div class="value"><input ng-model="item.value" placeholder="value" /></div>
      <a ng-click="ctrl.remove($event, item)" class="remove"></a>
    </div>
    <div class="message" ng-if="item.message" ng-bind="item.message"></div>
    <div class="toolbar">
      <a ng-click="ctrl.add('command', $index+1)" class="add-command" title="insert command here"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.5 11H13V7.5c0-.275-.225-.5-.5-.5h-2c-.275 0-.5.225-.5.5V11H6.5c-.275 0-.5.225-.5.5v2c0 .275.225.5.5.5H10v3.5c0 .275.225.5.5.5h2c.275 0 .5-.225.5-.5V14h3.5c.275 0 .5-.225.5-.5v-2c0-.275-.225-.5-.5-.5z"/></svg></a>
      <a ng-click="ctrl.add('comment', $index+1)" class="add-comment" title="insert comment here"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 7H8c-.55 0-1 .45-1 1v6c0 .55.45 1 1 1h1v3l3.037-3H18c.55 0 1-.45 1-1V8c0-.55-.45-1-1-1z"/></svg></a>
    </div>
  </div>
</div>
<datalist id="commands">
  <option value="click"></option>
  <option value="sendKeys"></option>
  <option value="assertText"></option>
  <option value="assertValue"></option>
  <option value="assertElementPresent"></option>
  <option value="assertVisible"></option>
</datalist>